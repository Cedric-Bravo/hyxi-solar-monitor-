version: "3.8"

services:
  hyxicalculator:
    build: .
    container_name: hyxicalculator
    ports:
      - "5000:5000"
    environment:
      # Configuration Flask
      - FLASK_APP=app/server.py
      - DEBUG=True
      - HOST=0.0.0.0
      - PORT=5000

      # API Hyxi Cloud (modifier selon vos besoins)
      - HYXI_API_BASE_URL=https://open.hyxicloud.com
      - HYXI_ACCESS_KEY=${HYXI_ACCESS_KEY}
      - HYXI_SECRET_KEY=${HYXI_SECRET_KEY}
      - HYXI_APPLICATION=test

      # Configuration centrale solaire
      - PLANT_ID=${PLANT_ID}
      - PLANT_NAME=${PLANT_NAME}

      # Tarifs
      - TARIF_ACHAT=${TARIF_ACHAT:-0.1494}
      - TARIF_VENTE=${TARIF_VENTE:-0.004}
      - RESALE_ENABLED=${RESALE_ENABLED:-False}
    volumes:
      # Monter le code en mode d√©veloppement (commenter en production)
      - ./app:/app/app
      - ./config.py:/app/config.py
    restart: unless-stopped
    networks:
      - hyxi-network

networks:
  hyxi-network:
    driver: bridge
